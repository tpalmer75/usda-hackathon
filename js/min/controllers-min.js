angular.module("lunch.controllers",[]).controller("MainCtrl",function(e,n,a,i,s,t){n.newSubmission={},n.formSubmitted=!1,n.currentPersonInfo={},n.showModal=!1;var l=new Date;n.filteredDate=s("date")(l,"MMM dd, y");var r=!1,o=[];n.frequencyValues=[{name:"Weekly",id:52},{name:"Bi-weekly",id:26},{name:"2x per month",id:24},{name:"Monthly",id:12},{name:"Yearly",id:1}],n.emptyPerson={signature:"",programs:"",caseNumber:"",firstName:"",MI:"",lastName:"",income:null,student:null,homeLessMigrantRunaway:null,fosterChild:null,street:"",apt:"",city:"",state:"",zip:"",phone:null,date:null,hispanic:null,indianAlaskan:null,asian:null,black:null,hawaiianIslander:null,white:null},n.newSubmission={children:[{firstName:n.newSubmission.testInfo,middleInitial:"",lastName:""}],adults:[{firstName:"",middleInitial:"",lastName:""}],date:n.filteredDate,primaryWageEarner:null,testInfo:"foo"},n.addPerson=function(e){var a={firstName:"",middleInitial:"",lastName:""};switch(e){case"child":n.newSubmission.children.push(a);break;case"adult":n.newSubmission.adults.push(a)}};var u=function(){for(var e={},a=0;a<newSubmission.children.length;a++){var i=n.newSubmission,s=newSubmission.children.length[a];e={signature:i.signature,programs:i.programs,caseNumber:i.caseNumber,firstName:s.firstName,middleInitial:s.middleInitial,lastName:s.lastName,income:null,student:null,homeLessMigrantRunaway:null,fosterChild:null,street:"",apt:"",city:"",state:"",zip:"",phone:null,date:null,hispanic:null,indianAlaskan:null,asian:null,black:null,hawaiianIslander:null,white:null}}};n.goBack=function(){window.history.back()},e.$on("$stateChangeSuccess",function(e,a){n.currentPerson=i.idx;var s=a.name;"adult-individual"===s?n.currentPersonInfo=n.newSubmission.adults[n.currentPerson]:"child-individual"===s&&(n.currentPersonInfo=n.newSubmission.children[n.currentPerson])}),n.goNext=function(e){if(e){switch(a.current.name){case"intro":a.go("legal");break;case"legal":a.go("sign");break;case"sign":a.go("programs");break;case"programs":a.go("child-add");break;case"child-add":a.go("child-individual",{idx:0});break;case"child-individual":if(n.currentPerson++,n.newSubmission.children[n.currentPerson])a.go("child-individual",{idx:n.currentPerson});else if(n.newSubmission.programs)a.go("contact");else{for(var i=!0,s=0;s<n.newSubmission.children.length;s++){var t=n.newSubmission.children[s].fosterChild,l=n.newSubmission.children[s].homelessMigrantRunaway;t||l||(i=!1)}i?a.go("contact"):a.go("adult-add")}break;case"adult-add":a.go("adult-individual",{idx:0});break;case"adult-individual":if(n.currentPerson++,n.newSubmission.adults[n.currentPerson])a.go("adult-individual",{idx:n.currentPerson});else{for(var r=0,o=0;o<n.newSubmission.adults.length;o++){var u=n.newSubmission.adults[o],d=n.newSubmission.adults[o].workIncomeAmount*n.newSubmission.adults[o].workIncomeFrequency;d>r&&d>0&&(r=d,n.newSubmission.primaryWageEarner=u.firstName)}a.go("household")}break;case"household":var c=n.newSubmission.children.length+n.newSubmission.adults.length;if(n.newSubmission.household!==c)return;a.go("contact");break;case"contact":a.go("ethnicity");break;case"ethnicity":a.go("finish"),console.log("should be starting")}n.formSubmitted=!1,document.body.scrollTop=85}},n.dataReady=!0,n.data=[{signature:"test",programs:"test",caseNumber:"test",firstName:"test",MI:"test",lastName:"test",income:"test",student:"test",homeLessMigrantRunaway:"test",fosterChild:"test",street:"test",apt:"test",city:"test",state:"test",zip:"test",phone:"test",date:"test",hispanic:"test",indianAlaskan:"test",asian:"test",black:"test",hawaiianIslander:"test",white:"test"}]});