angular.module("lunch.controllers",[]).controller("MainCtrl",function(n,e,i,r,s){e.newSubmission={},e.formSubmitted=!1,e.currentPersonInfo={};var o=new Date;e.filteredDate=s("date")(o,"MMM dd, y"),e.resetData=function(){e.newSubmission={children:[{firstName:"",middleInitial:"",lastName:""}],adults:[{firstName:"",middleInitial:"",lastName:""}]}},e.addPerson=function(n){var i={firstName:"",middleInitial:"",lastName:""};switch(n){case"child":e.newSubmission.children.push(i);break;case"adult":e.newSubmission.adults.push(i)}},e.goBack=function(){window.history.back()},n.$on("$stateChangeSuccess",function(n,i){e.currentPerson=r.idx;var s=i.name;"adult-individual"===s?e.currentPersonInfo=e.newSubmission.adults[e.currentPerson]:"child-individual"===s&&(e.currentPersonInfo=e.newSubmission.children[e.currentPerson])}),e.goNext=function(n){if(n){switch(e.previousState=i.current.name,e.previousState){case"programs":i.go("child-add");break;case"child-add":i.go("child-individual",{idx:0}),e.currentPersonInfo=e.newSubmission.children[0];break;case"child-individual":e.currentPerson++,e.newSubmission.children[e.currentPerson]?(i.go("child-individual",{idx:e.currentPerson}),e.currentPersonInfo=e.newSubmission.children[e.currentPerson]):e.newSubmission.programs?i.go("contact"):i.go("adult-add");break;case"adult-add":i.go("adult-individual",{idx:0}),e.currentPersonInfo=e.newSubmission.adults[0];break;case"adult-individual":e.currentPerson++,e.newSubmission.adults[e.currentPerson]?(i.go("adult-individual",{idx:e.currentPerson}),e.currentPersonInfo=e.newSubmission.adults[e.currentPerson]):i.go("household");break;case"household":var r=e.newSubmission.children.length+e.newSubmission.adults.length;if(e.newSubmission.household!==r)return;i.go("contact")}e.formSubmitted=!1}}});